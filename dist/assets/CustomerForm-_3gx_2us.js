import{x as E,G as m,aN as N,aH as B,c as v,w as a,o as f,f as e,m as S,h as c,A as s,aO as T,X as j,a7 as F,a3 as b,a4 as u,u as L,aC as R,L as n,H as M,E as D,s as H,Z as P,J as U,b as k,aP as I}from"./index-ChThWpwh.js";import{U as O,_ as z}from"./UiParentCard.vue_vue_type_script_setup_true_lang-CBB4u1YX.js";import{u as G}from"./customers-Dh2zOSHH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={key:0},X={class:"d-flex ga-6 mt-8 justify-end"},Z="/src/assets/images/customer/avatar-0.webp",h=E({__name:"CustomerForm",setup($){const C=N(),y=I(),V=m(""),_=m(!1),p=m(!1),w=m(),d=G();C.params.id?(V.value="Edit Customer",d.getCustomerById(C.params.id)):(V.value="New Customer",d.newCustomer());const{customer:t}=B(d),i=r=>r?!0:"This field is required.",g=[i,r=>(r==null?void 0:r.length)<=20?!0:"Name must be less than 10 characters."],q=[i,r=>/.+@.+\..+/.test(r)?!0:"E-mail must be valid."];function A(){d.customer&&(d.customer={}),y.replace({path:"/customer"})}async function x(r){r.preventDefault();const{valid:l}=await w.value.validate();l&&(p.value=!0,(await d.saveCustomer(t.value)).status&&y.replace({path:"/customer"}),p.value=!1)}return(r,l)=>(f(),v(O,null,{default:a(()=>[e(z,{title:V.value},{default:a(()=>[s(d).loading?c("",!0):(f(),S("div",J,[e(T,{ref_key:"form",ref:w,modelValue:_.value,"onUpdate:modelValue":l[7]||(l[7]=o=>_.value=o),onSubmit:l[8]||(l[8]=j(()=>{},["prevent"]))},{default:a(()=>[e(F,null,{default:a(()=>[e(b,{justify:"start"},{default:a(()=>[e(u,{cols:"12",md:"4"},{default:a(()=>[e(L,{size:"120"},{default:a(()=>[s(t).avatar?(f(),v(R,{key:0,alt:"Avatar",src:s(t).avatar},null,8,["src"])):c("",!0),s(t).avatar?c("",!0):(f(),v(R,{key:1,alt:"Avatar",src:Z}))]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{modelValue:s(t).firstname,"onUpdate:modelValue":l[0]||(l[0]=o=>s(t).firstname=o),rules:g,label:"First name",variant:"solo-filled",required:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{modelValue:s(t).lastname,"onUpdate:modelValue":l[1]||(l[1]=o=>s(t).lastname=o),rules:g,variant:"solo-filled",label:"Last name",required:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{modelValue:s(t).email,"onUpdate:modelValue":l[2]||(l[2]=o=>s(t).email=o),rules:q,label:"E-mail",variant:"solo-filled",required:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{modelValue:s(t).phone,"onUpdate:modelValue":l[3]||(l[3]=o=>s(t).phone=o),rules:[i],label:"Phone",variant:"solo-filled",required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{modelValue:s(t).mobile,"onUpdate:modelValue":l[4]||(l[4]=o=>s(t).mobile=o),rules:[i],variant:"solo-filled",label:"Mobile",required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{type:"number",modelValue:s(t).rewards,"onUpdate:modelValue":l[5]||(l[5]=o=>s(t).rewards=o),rules:[i],label:"Rewards",variant:"solo-filled",required:""},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(M,{clearable:"",label:"Membership",modelValue:s(t).membership,"onUpdate:modelValue":l[6]||(l[6]=o=>s(t).membership=o),rules:[i],items:["standard","vip"],variant:"solo-filled"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(D),e(b,{justify:"end"},{default:a(()=>[e(u,{cols:"12",lg:"2",md:"6",sm:"12",justify:"end",class:""},{default:a(()=>[e(P),H("div",X,[e(U,{loading:p.value,color:"secondary",variant:"flat",type:"submit",onClick:x},{default:a(()=>l[9]||(l[9]=[k(" 등록 ")])),_:1},8,["loading"]),e(U,{onClick:A,color:"primary",variant:"outlined"},{default:a(()=>l[10]||(l[10]=[k(" 취소 ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))]),_:1},8,["title"])]),_:1}))}});export{h as default};
