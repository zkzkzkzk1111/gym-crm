import{d as t}from"./index-ChThWpwh.js";import{g as r}from"./goodsService-D9gxH4bt.js";const a=t("Goods",{state:()=>({goodsList:[],goodsType:[],goods:null,loading:!1,error:null,filter:""}),getters:{filteredGoods(){if(!this.filter)return this.goodsList;const s=this.filter.toLowerCase();return this.goodsList.filter(o=>{var e;return o.goodsName.toLowerCase().includes(s)||(((e=o.description)==null?void 0:e.toLowerCase().includes(s))??!1)})},allGoodsTypes(){return this.goodsType},getGoodsByType:s=>o=>s.goodsList.filter(e=>e.type===o)},actions:{async fetchAll(){this.loading=!0,this.error=null;try{console.log("========== fetchAll 시작 =========="),this.goodsList=await r.getAll(),console.log("goodsList 업데이트 완료:",this.goodsList),console.log("goodsList 길이:",this.goodsList.length),console.log("==================================")}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch goods",console.error("Error fetching goods:",s)}finally{this.loading=!1}},async fetchById(s){this.loading=!0,this.error=null;try{this.goods=await r.getById(s)}catch(o){this.error=o instanceof Error?o.message:"Failed to fetch goods",console.error("Error fetching goods:",o)}finally{this.loading=!1}},async fetchGoodsType(){this.loading=!0,this.error=null;try{this.goodsType=await r.getGoodsType()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch goods type",console.error("Error fetching goods type:",s)}finally{this.loading=!1}},async createGoods(s){this.loading=!0,this.error=null;try{console.log("========== createGoods 시작 =========="),console.log("요청 데이터:",s);const o=await r.create(s);return console.log("등록 응답:",o),o.status>=200&&o.status<300?(console.log("fetchAll 호출 전 goodsList 길이:",this.goodsList.length),await this.fetchAll(),console.log("fetchAll 호출 후 goodsList 길이:",this.goodsList.length),console.log("====================================="),{success:!0,message:o.message}):(this.error=o.message||"Failed to create goods",{success:!1,error:this.error})}catch(o){return this.error=o instanceof Error?o.message:"Failed to create goods",console.error("Error creating goods:",o),{success:!1,error:this.error}}finally{this.loading=!1}},async updateGoods(s,o){this.loading=!0,this.error=null;try{console.log("========== updateGoods 시작 =========="),console.log("요청 데이터:",o);const e=await r.update(s,o);return console.log("수정 응답:",e),e.status>=200&&e.status<300?(console.log("fetchAll 호출 전 goodsList 길이:",this.goodsList.length),await this.fetchAll(),console.log("fetchAll 호출 후 goodsList 길이:",this.goodsList.length),console.log("====================================="),{success:!0,message:e.message}):(this.error=e.message||"Failed to update goods",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to update goods",console.error("Error updating goods:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteGoods(s){this.loading=!0,this.error=null;try{return await r.delete(s),this.goodsList=this.goodsList.filter(o=>o.idx!==s),{success:!0}}catch(o){return this.error=o instanceof Error?o.message:"Failed to delete goods",console.error("Error deleting goods:",o),{success:!1,error:this.error}}finally{this.loading=!1}},initNewGoods(){this.goods={idx:0,goodsName:"",cash:null,card:null,description:null,duration:0,type:0,useCount:0,instructor:null,instructorName:null}}}});export{a as u};
