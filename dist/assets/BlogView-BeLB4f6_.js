import{U as O,_ as R}from"./UiParentCard.vue_vue_type_script_setup_true_lang-CBB4u1YX.js";import{d as M,aR as c,x as E,aH as G,G as V,c as $,w as r,o as d,f as e,m as y,h as B,A as o,aJ as J,L as W,aM as b,E as P,a3 as S,F as H,n as q,a4 as k,g as K,b as i,t as n,a_ as Q,ab as X,aC as T,a9 as Y,aw as Z,ac as ee,s as v,_ as w,aG as te,u as ae,J as le}from"./index-ChThWpwh.js";import{_ as se}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-1MLmho_D.js";import{_ as re}from"./NotificeBar-SNjTBcAG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function z(a){return Number(a.toFixed(2))}const f="http://54.180.238.9:8080/blogs",oe=M("Blogs",{state:()=>({blogs:[],loading:!1,filter:"",pageSize:10,currentPage:1,blog:{}}),getters:{filteredData(a){return this.blogs.filter(u=>this.filter?u.title.toLowerCase().indexOf(this.filter.toLowerCase())>-1:!0).slice((a.currentPage-1)*this.pageSize,a.currentPage*this.pageSize)},totalPages(){return Math.ceil(this.blogs.length/this.pageSize)},totalCount(){return this.blogs.length}},actions:{async getAll(){this.loading=!0,this.blogs=await c.get(f),this.loading=!1},async delteBlog(a){const t=await c.delete(`${f}/${a}`);return t.error&&console.log(t.error),t},async getBlogById(a){this.loading=!0;const t=await c.get(`${f}/${a}`);this.blog={...t,price:z(t.price),retailPrice:z(t.retailPrice*1.1)},this.loading=!1},async saveBlog(a){let t;return a.id?t=await c.put(`${f}/${a.id}`,a):t=await c.post(`${f}`,a),t}}}),ie={key:0},ne={key:1},ue={class:"ml-0 text-h6 price"},ce={class:"ml-0 text-h6 price"},de={class:"ml-0 text-h6 price"},ve=E({__name:"BlogView",setup(a){const t=oe();t.getAll();const{filteredData:x,filter:u,totalPages:A,currentPage:C,totalCount:N}=G(t),g=V(!1),m=V(!1),h=V("");function U(l){g.value=!0,h.value=l}function D(){h.value&&t.delteBlog(h.value).then(l=>{g.value=!1,l.status&&(m.value=!0,setTimeout(()=>{m.value=!1,t.getAll()},1e3))}).finally(()=>h.value="")}function F(){g.value=!1}function L(){m.value=!1}function j(l){return l===0?12:l===1?8:l===2?4:3}function I(l){return l===0?1420:l===1?960:l===2?440:360}return(l,p)=>(d(),$(O,null,{default:r(()=>[e(R,{title:"Blogs"},{default:r(()=>[o(t).loading?(d(),y("div",ie,[e(J,{color:"secondary",height:"6",indeterminate:"",rounded:""})])):B("",!0),o(t).loading?B("",!0):(d(),y("div",ne,[e(W,{modelValue:o(u),"onUpdate:modelValue":p[0]||(p[0]=s=>b(u)?u.value=s:null),variant:"solo-filled",class:"pa-2",label:"Filter"},null,8,["modelValue"]),e(P,{class:"mb-10"}),e(S,null,{default:r(()=>[(d(!0),y(H,null,q(o(x),(s,_)=>(d(),$(k,{cols:"12",lg:j(_),md:"4",sm:"6",key:_},{default:r(()=>[e(X,{variant:"elevated",class:"mx-auto ma-5","max-width":I(_)},{default:r(()=>[e(T,{class:Y(`${_==0?"":"blog-img"} align-end text-primary b-r-25`),height:"250",src:s.coverUrl,cover:""},null,8,["class","src"]),e(Z,{class:"text-h3"},{default:r(()=>[i(n(s.title),1)]),_:2},1024),e(ee,{class:"d-flex ga-2 justify-space-between"},{default:r(()=>[v("div",ue,[e(w,{icon:"$eye"}),i(" "+n(s.totalViews),1)]),v("div",ce,[e(w,{icon:"$share"}),i(" "+n(s.totalShares),1)]),v("div",de,[e(w,{icon:"$comments"}),i(" "+n(s.totalComments),1)])]),_:2},1024),e(te,{class:"d-flex justify-space-between"},{default:r(()=>[v("div",null,[e(ae,{size:"36px"},{default:r(()=>[e(T,{alt:"Avatar",src:s.author.avatar},null,8,["src"])]),_:2},1024),i(" "+n(s.author.name),1)]),e(le,{color:"primary",variant:"plain",text:"Delete",size:"large",onClick:fe=>U(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["max-width"])]),_:2},1032,["lg"]))),128))]),_:1}),e(S,{justify:"center"},{default:r(()=>[e(k,{cols:"12",lg:"12",class:"d-flex justify-center"},{default:r(()=>[e(K,{class:"text-h5",color:"primary"},{default:r(()=>[i(" Total: "+n(o(N)),1)]),_:1})]),_:1})]),_:1}),e(P,{class:"my-5"}),e(Q,{modelValue:o(C),"onUpdate:modelValue":p[1]||(p[1]=s=>b(C)?C.value=s:null),length:o(A),rounded:"circle"},null,8,["modelValue","length"])]))]),_:1}),e(se,{dialog:g.value,onOnConfirm:D,onOnCancel:F},null,8,["dialog"]),e(re,{notice:m.value,onOnClose:L},null,8,["notice"])]),_:1}))}});export{ve as default};
