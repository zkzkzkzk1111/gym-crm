import{d as i}from"./index-ChThWpwh.js";import{c as t}from"./classService-DyrUrkM7.js";const n=i("Class",{state:()=>({classList:[],classType:[],class:null,loading:!1,error:null,filter:""}),getters:{filteredClass(){if(!this.filter)return this.classList;const r=this.filter.toLowerCase();return this.classList.filter(s=>{var e;return s.className.toLowerCase().includes(r)||(((e=s.description)==null?void 0:e.toLowerCase().includes(r))??!1)})},allClassTypes(){return this.classType},getClassByType:r=>s=>r.classList.filter(e=>e.type===s)},actions:{async fetchAll(){this.loading=!0,this.error=null;try{this.classList=await t.getAll()}catch(r){this.error=r instanceof Error?r.message:"Failed to fetch class",console.error("Error fetching class:",r)}finally{this.loading=!1}},async fetchById(r){this.loading=!0,this.error=null;try{this.class=await t.getById(r)}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch class",console.error("Error fetching class:",s)}finally{this.loading=!1}},async fetchClassType(){this.loading=!0,this.error=null;try{this.classType=await t.getClassType()}catch(r){this.error=r instanceof Error?r.message:"Failed to fetch class type",console.error("Error fetching class type:",r)}finally{this.loading=!1}},async createClass(r){this.loading=!0,this.error=null;try{const s=await t.create(r);return this.classList.push(s),{success:!0,data:s}}catch(s){return this.error=s instanceof Error?s.message:"Failed to create class",console.error("Error creating class:",s),{success:!1,error:this.error}}finally{this.loading=!1}},async updateClass(r,s){this.loading=!0,this.error=null;try{const e=await t.update(r,s),a=this.classList.findIndex(l=>l.idx===r);return a!==-1&&(this.classList[a]=e),{success:!0,data:e}}catch(e){return this.error=e instanceof Error?e.message:"Failed to update class",console.error("Error updating class:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteClass(r){this.loading=!0,this.error=null;try{return await t.delete(r),this.classList=this.classList.filter(s=>s.idx!==r),{success:!0}}catch(s){return this.error=s instanceof Error?s.message:"Failed to delete class",console.error("Error deleting class:",s),{success:!1,error:this.error}}finally{this.loading=!1}},initNewClass(){this.class={idx:0,className:"",cash:null,card:null,description:null,duration:0,type:0,useCount:0,typeName:"",instructor:null,instructorName:null}}}});export{n as u};
