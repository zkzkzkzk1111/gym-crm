import{x as T,G as m,aI as j,aN as E,aH as N,c as M,w as u,o as U,f as a,m as A,h as D,A as s,aO as F,X as H,a7 as I,a3 as q,a4 as o,H as x,L as i,E as L,s as G,Z as J,J as _,b as w,aP as O}from"./index-ChThWpwh.js";import{U as P,_ as X}from"./UiParentCard.vue_vue_type_script_setup_true_lang-CBB4u1YX.js";import{u as Z}from"./class-DG6Di__7.js";import{u as $}from"./staff-lYDUuXCw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./classService-DyrUrkM7.js";import"./axios-D8WuJDhL.js";import"./staffService-B334Pa8R.js";const z={key:0},K={class:"d-flex ga-6 mt-8 justify-end"},ue=T({__name:"EditClass",setup(Q){const f=E(),V=O(),c=m(""),b=m(!1),p=m(!1),y=m(),r=Z(),C=$();j(()=>{r.fetchClassType(),C.fetchAll()}),f.params.id?(c.value="수업 수정",r.fetchById(Number(f.params.id))):(c.value="수업등록",r.initNewClass());const{class:e,allClassTypes:R}=N(r),{staffList:S}=N(C),d=n=>n?!0:"필수사항입니다.",k=[d];function g(){V.replace({path:"/class"})}async function B(n){n.preventDefault();const{valid:l}=await y.value.validate();if(l&&e.value){p.value=!0;let t;if(f.params.id){const v={className:e.value.className,cash:e.value.cash?Number(e.value.cash):null,card:e.value.card?Number(e.value.card):null,description:e.value.description,duration:Number(e.value.duration),type:e.value.type,useCount:Number(e.value.useCount),instructor:e.value.instructor};t=await r.updateClass(e.value.idx,v)}else{const v={className:e.value.className,cash:e.value.cash?Number(e.value.cash):null,card:e.value.card?Number(e.value.card):null,description:e.value.description,duration:Number(e.value.duration),type:e.value.type,useCount:Number(e.value.useCount),instructor:e.value.instructor};t=await r.createClass(v)}t.success&&V.replace({path:"/class"}),p.value=!1}}return(n,l)=>(U(),M(P,null,{default:u(()=>[a(X,{title:c.value},{default:u(()=>[!s(r).loading&&s(e)?(U(),A("div",z,[a(F,{ref_key:"form",ref:y,modelValue:b.value,"onUpdate:modelValue":l[8]||(l[8]=t=>b.value=t),onSubmit:l[9]||(l[9]=H(()=>{},["prevent"]))},{default:u(()=>[a(I,null,{default:u(()=>[a(q,null,{default:u(()=>[a(o,{cols:"12",md:"4"},{default:u(()=>[a(x,{modelValue:s(e).type,"onUpdate:modelValue":l[0]||(l[0]=t=>s(e).type=t),rules:[d],label:"종류",items:s(R),"item-title":"typeName","item-value":"idx",variant:"solo-filled",required:""},null,8,["modelValue","rules","items"])]),_:1}),a(o,{cols:"12",md:"4"},{default:u(()=>[a(x,{modelValue:s(e).instructor,"onUpdate:modelValue":l[1]||(l[1]=t=>s(e).instructor=t),rules:[d],label:"강사",items:s(S),"item-title":"name","item-value":"idx",variant:"solo-filled",required:""},null,8,["modelValue","rules","items"])]),_:1}),a(o,{cols:"12",md:"4"},{default:u(()=>[a(i,{modelValue:s(e).className,"onUpdate:modelValue":l[2]||(l[2]=t=>s(e).className=t),rules:k,label:"수업명",variant:"solo-filled",required:""},null,8,["modelValue"])]),_:1}),a(o,{cols:"12",md:"4"},{default:u(()=>[a(i,{type:"number",modelValue:s(e).cash,"onUpdate:modelValue":l[3]||(l[3]=t=>s(e).cash=t),rules:[d],variant:"solo-filled",label:"현금가",required:""},null,8,["modelValue","rules"])]),_:1}),a(o,{cols:"12",md:"4"},{default:u(()=>[a(i,{type:"number",modelValue:s(e).card,"onUpdate:modelValue":l[4]||(l[4]=t=>s(e).card=t),rules:[d],variant:"solo-filled",label:"카드가",required:""},null,8,["modelValue","rules"])]),_:1}),a(o,{cols:"12",md:"4"},{default:u(()=>[a(i,{type:"number",modelValue:s(e).duration,"onUpdate:modelValue":l[5]||(l[5]=t=>s(e).duration=t),rules:[d],label:"이용기간(일)",variant:"solo-filled",required:""},null,8,["modelValue","rules"])]),_:1}),a(o,{cols:"12",md:"4"},{default:u(()=>[a(i,{type:"number",modelValue:s(e).useCount,"onUpdate:modelValue":l[6]||(l[6]=t=>s(e).useCount=t),label:"이용횟수",variant:"solo-filled",required:""},null,8,["modelValue"])]),_:1}),a(o,{cols:"12",md:"8"},{default:u(()=>[a(i,{modelValue:s(e).description,"onUpdate:modelValue":l[7]||(l[7]=t=>s(e).description=t),label:"상세설명",variant:"solo-filled"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(L),a(q,{justify:"end"},{default:u(()=>[a(o,{cols:"12",lg:"2",md:"6",sm:"12",justify:"end",class:""},{default:u(()=>[a(J),G("div",K,[a(_,{loading:p.value,color:"secondary",variant:"flat",type:"submit",onClick:B},{default:u(()=>l[10]||(l[10]=[w(" 등록 ")])),_:1},8,["loading"]),a(_,{onClick:g,color:"primary",variant:"outlined"},{default:u(()=>l[11]||(l[11]=[w(" 취소 ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):D("",!0)]),_:1},8,["title"])]),_:1}))}});export{ue as default};
