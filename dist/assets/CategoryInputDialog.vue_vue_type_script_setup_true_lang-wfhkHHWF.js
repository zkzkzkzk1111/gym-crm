import{d as _,x as C,c as P,o as y,aF as G,w as n,f as t,ab as A,aw as x,s as d,t as T,J as p,b as f,_ as L,E as $,ac as M,aS as D,m as b,h as I,n as N,F as U,aG as k,Z as B,G as z,aT as K,L as j,aU as J}from"./index-ChThWpwh.js";import{a}from"./axios-D8WuJDhL.js";import{s as R}from"./staffService-B334Pa8R.js";import{g as Z}from"./goodsService-D9gxH4bt.js";import{c as q}from"./classService-DyrUrkM7.js";const o="/api/common",w={async getAll(){return(await a.get(`${o}/getPurposeList`)).data.data},async getById(s){return(await a.get(`${o}/getPurpose/${s}`)).data.data},async create(s){return(await a.post(`${o}/category/createPurpose`,s)).data},async update(s,e){return(await a.put(`${o}/category/updatePurpose/${s}`,e)).data},async delete(s){return(await a.delete(`${o}/category/deletePurpose/${s}`)).data}},E={async getAll(){return(await a.get(`${o}/getVisitPathList`)).data.data},async getById(s){return(await a.get(`${o}/VisitPath/${s}`)).data.data},async create(s){return(await a.post(`${o}/category/createVisitPath`,s)).data},async update(s,e){return(await a.put(`${o}/category/updateVisitPath/${s}`,e)).data},async delete(s){return(await a.delete(`${o}/category/deleteVisitPath/${s}`)).data}},v={async getAll(){return(await a.get(`${o}/getMemberStatusList`)).data.data},async create(s){return(await a.post(`${o}/category/createMemberStatus`,s)).data},async update(s,e){return(await a.put(`${o}/category/updateMemberStatus/${s}`,e)).data},async delete(s){return(await a.delete(`${o}/category/deleteMemberStatus/${s}`)).data}},V={async getAll(){return await R.getGradeList()},async create(s){return(await a.post(`${o}/category/createStaffGrade`,s)).data},async update(s,e){return(await a.put(`${o}/category/updateStaffGrade/${s}`,e)).data},async delete(s){return(await a.delete(`${o}/category/deleteStaffGrade/${s}`)).data}},F={async getAll(){return await Z.getGoodsType()},async create(s){return(await a.post(`${o}/category/createGoodsType`,s)).data},async update(s,e){return(await a.put(`${o}/category/updateGoodsType/${s}`,e)).data},async delete(s){return(await a.delete(`${o}/category/deleteGoodsType/${s}`)).data}},S={async getAll(){return await q.getClassType()},async create(s){return(await a.post(`${o}/category/createClassType`,s)).data},async update(s,e){return(await a.put(`${o}/category/updateClassType/${s}`,e)).data},async delete(s){return(await a.delete(`${o}/category/deleteClassType/${s}`)).data}},se=_("category",{state:()=>({visitPaths:[],purposes:[],memberStatuses:[],staffGrades:[],goodsTypes:[],classTypes:[],loading:!1,error:null}),getters:{allVisitPaths(){return this.visitPaths},allPurposes(){return this.purposes},allMemberStatuses(){return this.memberStatuses},allStaffGrades(){return this.staffGrades},allGoodsTypes(){return this.goodsTypes},allClassTypes(){return this.classTypes}},actions:{async fetchVisitPaths(){this.loading=!0,this.error=null;try{this.visitPaths=await E.getAll()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch visit paths",console.error("Error fetching visit paths:",s)}finally{this.loading=!1}},async fetchPurposes(){this.loading=!0,this.error=null;try{this.purposes=await w.getAll()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch purposes",console.error("Error fetching purposes:",s)}finally{this.loading=!1}},async fetchMemberStatuses(){this.loading=!0,this.error=null;try{this.memberStatuses=await v.getAll()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch member statuses",console.error("Error fetching member statuses:",s)}finally{this.loading=!1}},async fetchStaffGrades(){this.loading=!0,this.error=null;try{this.staffGrades=await V.getAll()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch staff grades",console.error("Error fetching staff grades:",s)}finally{this.loading=!1}},async fetchGoodsTypes(){this.loading=!0,this.error=null;try{this.goodsTypes=await F.getAll()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch goods types",console.error("Error fetching goods types:",s)}finally{this.loading=!1}},async fetchClassTypes(){this.loading=!0,this.error=null;try{this.classTypes=await S.getAll()}catch(s){this.error=s instanceof Error?s.message:"Failed to fetch class types",console.error("Error fetching class types:",s)}finally{this.loading=!1}},async fetchAll(){await Promise.all([this.fetchVisitPaths(),this.fetchPurposes(),this.fetchMemberStatuses(),this.fetchStaffGrades(),this.fetchGoodsTypes(),this.fetchClassTypes()])},async createVisitPath(s){this.loading=!0,this.error=null;try{const e=await E.create({visitPathName:s});return e.status>=200&&e.status<300?(await this.fetchVisitPaths(),{success:!0,message:e.message}):(this.error=e.message||"Failed to create visit path",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to create visit path",console.error("Error creating visit path:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async updateVisitPath(s,e){this.loading=!0,this.error=null;try{const r=await E.update(s,{visitPathName:e});return r.status>=200&&r.status<300?(await this.fetchVisitPaths(),{success:!0,message:r.message}):(this.error=r.message||"Failed to update visit path",{success:!1,error:this.error})}catch(r){return this.error=r instanceof Error?r.message:"Failed to update visit path",console.error("Error updating visit path:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteVisitPath(s){this.loading=!0,this.error=null;try{const e=await E.delete(s);return e.status>=200&&e.status<300?(await this.fetchVisitPaths(),{success:!0,message:e.message}):(this.error=e.message||"Failed to delete visit path",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to delete visit path",console.error("Error deleting visit path:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async createPurpose(s){this.loading=!0,this.error=null;try{const e=await w.create({purposeName:s});return e.status>=200&&e.status<300?(await this.fetchPurposes(),{success:!0,message:e.message}):(this.error=e.message||"Failed to create purpose",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to create purpose",console.error("Error creating purpose:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async updatePurpose(s,e){this.loading=!0,this.error=null;try{const r=await w.update(s,{purposeName:e});return r.status>=200&&r.status<300?(await this.fetchPurposes(),{success:!0,message:r.message}):(this.error=r.message||"Failed to update purpose",{success:!1,error:this.error})}catch(r){return this.error=r instanceof Error?r.message:"Failed to update purpose",console.error("Error updating purpose:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async deletePurpose(s){this.loading=!0,this.error=null;try{const e=await w.delete(s);return e.status>=200&&e.status<300?(await this.fetchPurposes(),{success:!0,message:e.message}):(this.error=e.message||"Failed to delete purpose",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to delete purpose",console.error("Error deleting purpose:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async createMemberStatus(s){this.loading=!0,this.error=null;try{const e=await v.create({statusName:s});return e.status>=200&&e.status<300?(await this.fetchMemberStatuses(),{success:!0,message:e.message}):(this.error=e.message||"Failed to create member status",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to create member status",console.error("Error creating member status:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async updateMemberStatus(s,e){this.loading=!0,this.error=null;try{const r=await v.update(s,{statusName:e});return r.status>=200&&r.status<300?(await this.fetchMemberStatuses(),{success:!0,message:r.message}):(this.error=r.message||"Failed to update member status",{success:!1,error:this.error})}catch(r){return this.error=r instanceof Error?r.message:"Failed to update member status",console.error("Error updating member status:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteMemberStatus(s){this.loading=!0,this.error=null;try{const e=await v.delete(s);return e.status>=200&&e.status<300?(await this.fetchMemberStatuses(),{success:!0,message:e.message}):(this.error=e.message||"Failed to delete member status",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to delete member status",console.error("Error deleting member status:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async createStaffGrade(s){this.loading=!0,this.error=null;try{const e=await V.create({name:s});return e.status>=200&&e.status<300?(await this.fetchStaffGrades(),{success:!0,message:e.message}):(this.error=e.message||"Failed to create staff grade",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to create staff grade",console.error("Error creating staff grade:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async updateStaffGrade(s,e){this.loading=!0,this.error=null;try{const r=await V.update(s,{name:e});return r.status>=200&&r.status<300?(await this.fetchStaffGrades(),{success:!0,message:r.message}):(this.error=r.message||"Failed to update staff grade",{success:!1,error:this.error})}catch(r){return this.error=r instanceof Error?r.message:"Failed to update staff grade",console.error("Error updating staff grade:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteStaffGrade(s){this.loading=!0,this.error=null;try{const e=await V.delete(s);return e.status>=200&&e.status<300?(await this.fetchStaffGrades(),{success:!0,message:e.message}):(this.error=e.message||"Failed to delete staff grade",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to delete staff grade",console.error("Error deleting staff grade:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async createGoodsType(s){this.loading=!0,this.error=null;try{const e=await F.create({typeName:s});return e.status>=200&&e.status<300?(await this.fetchGoodsTypes(),{success:!0,message:e.message}):(this.error=e.message||"Failed to create goods type",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to create goods type",console.error("Error creating goods type:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async updateGoodsType(s,e){this.loading=!0,this.error=null;try{const r=await F.update(s,{typeName:e});return r.status>=200&&r.status<300?(await this.fetchGoodsTypes(),{success:!0,message:r.message}):(this.error=r.message||"Failed to update goods type",{success:!1,error:this.error})}catch(r){return this.error=r instanceof Error?r.message:"Failed to update goods type",console.error("Error updating goods type:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteGoodsType(s){this.loading=!0,this.error=null;try{const e=await F.delete(s);return e.status>=200&&e.status<300?(await this.fetchGoodsTypes(),{success:!0,message:e.message}):(this.error=e.message||"Failed to delete goods type",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to delete goods type",console.error("Error deleting goods type:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async createClassType(s){this.loading=!0,this.error=null;try{const e=await S.create({typeName:s});return e.status>=200&&e.status<300?(await this.fetchClassTypes(),{success:!0,message:e.message}):(this.error=e.message||"Failed to create class type",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to create class type",console.error("Error creating class type:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async updateClassType(s,e){this.loading=!0,this.error=null;try{const r=await S.update(s,{typeName:e});return r.status>=200&&r.status<300?(await this.fetchClassTypes(),{success:!0,message:r.message}):(this.error=r.message||"Failed to update class type",{success:!1,error:this.error})}catch(r){return this.error=r instanceof Error?r.message:"Failed to update class type",console.error("Error updating class type:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteClassType(s){this.loading=!0,this.error=null;try{const e=await S.delete(s);return e.status>=200&&e.status<300?(await this.fetchClassTypes(),{success:!0,message:e.message}):(this.error=e.message||"Failed to delete class type",{success:!1,error:this.error})}catch(e){return this.error=e instanceof Error?e.message:"Failed to delete class type",console.error("Error deleting class type:",e),{success:!1,error:this.error}}finally{this.loading=!1}}}}),H={key:0},O={class:"text-center"},re=C({__name:"CategoryManageDialog",props:{modelValue:{type:Boolean},title:{default:"카테고리 관리"},categories:{default:()=>[]}},emits:["update:modelValue","add","edit","delete"],setup(s,{emit:e}){const r=e,h=()=>{r("add")},c=u=>{r("edit",u)},m=u=>{r("delete",u)};return(u,i)=>(y(),P(G,{"model-value":u.modelValue,"onUpdate:modelValue":i[1]||(i[1]=l=>r("update:modelValue",l)),"max-width":"600",persistent:""},{default:n(()=>[t(A,null,{default:n(()=>[t(x,{class:"d-flex justify-space-between align-center"},{default:n(()=>[d("span",null,T(u.title),1),t(p,{onClick:h,color:"primary",variant:"elevated",size:"small"},{default:n(()=>[t(L,null,{default:n(()=>i[2]||(i[2]=[f("mdi-plus")])),_:1}),i[3]||(i[3]=f(" 추가 "))]),_:1})]),_:1}),t($),t(M,{class:"pa-0"},{default:n(()=>[t(D,null,{default:n(()=>[i[5]||(i[5]=d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"이름"),d("th",{class:"text-center",style:{width:"150px"}},"관리")])],-1)),d("tbody",null,[u.categories.length===0?(y(),b("tr",H,i[4]||(i[4]=[d("td",{colspan:"2",class:"text-center text-grey pa-4"}," 등록된 카테고리가 없습니다 ",-1)]))):I("",!0),(y(!0),b(U,null,N(u.categories,l=>(y(),b("tr",{key:l.id},[d("td",null,T(l.name),1),d("td",O,[t(p,{onClick:g=>c(l),color:"primary",variant:"text",size:"small",icon:"$edit"},null,8,["onClick"]),t(p,{onClick:g=>m(l),color:"error",variant:"text",size:"small",icon:"$delete"},null,8,["onClick"])])]))),128))])]),_:1})]),_:1}),t($),t(k,null,{default:n(()=>[t(B),t(p,{onClick:i[0]||(i[0]=l=>r("update:modelValue",!1)),color:"secondary",variant:"text"},{default:n(()=>i[6]||(i[6]=[f(" 닫기 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),te=C({__name:"CategoryInputDialog",props:{modelValue:{type:Boolean},title:{default:"카테고리 추가"},label:{default:"카테고리 이름"},initialValue:{default:""}},emits:["update:modelValue","confirm","cancel"],setup(s,{emit:e}){const r=s,h=e,c=z("");K(()=>r.modelValue,i=>{i&&(c.value=r.initialValue)});const m=()=>{c.value.trim()&&(h("confirm",c.value.trim()),h("update:modelValue",!1),c.value="")},u=()=>{h("cancel"),h("update:modelValue",!1),c.value=""};return(i,l)=>(y(),P(G,{"model-value":i.modelValue,"onUpdate:modelValue":l[1]||(l[1]=g=>h("update:modelValue",g)),"max-width":"400",persistent:""},{default:n(()=>[t(A,null,{default:n(()=>[t(x,null,{default:n(()=>[f(T(i.title),1)]),_:1}),t($),t(M,{class:"pt-4"},{default:n(()=>[t(j,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=g=>c.value=g),label:i.label,variant:"outlined",density:"comfortable",autofocus:"",onKeyup:J(m,["enter"])},null,8,["modelValue","label"])]),_:1}),t($),t(k,null,{default:n(()=>[t(B),t(p,{onClick:u,color:"secondary",variant:"text"},{default:n(()=>l[2]||(l[2]=[f(" 취소 ")])),_:1}),t(p,{onClick:m,color:"primary",variant:"elevated",disabled:!c.value.trim()},{default:n(()=>l[3]||(l[3]=[f(" 확인 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}});export{re as _,te as a,se as u};
