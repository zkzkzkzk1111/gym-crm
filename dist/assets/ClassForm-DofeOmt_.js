import{x as T,G as m,aI as j,aN as F,aH as N,c as M,w as o,o as U,f as a,m as A,h as D,A as s,aO as E,X as H,a7 as I,a3 as x,a4 as u,H as q,L as i,E as L,s as G,Z as J,J as _,b as w,aP as O}from"./index-ChThWpwh.js";import{U as P,_ as X}from"./UiParentCard.vue_vue_type_script_setup_true_lang-CBB4u1YX.js";import{u as Z}from"./class-DG6Di__7.js";import{u as $}from"./staff-lYDUuXCw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./classService-DyrUrkM7.js";import"./axios-D8WuJDhL.js";import"./staffService-B334Pa8R.js";const z={key:0},K={class:"d-flex ga-6 mt-8 justify-end"},oe=T({__name:"ClassForm",setup(Q){const f=F(),v=O(),p=m(""),V=m(!1),c=m(!1),b=m(),r=Z(),y=$();j(()=>{r.fetchClassType(),y.fetchAll()}),f.params.id?(p.value="수업 수정",r.fetchById(Number(f.params.id))):(p.value="수업등록",r.initNewClass());const{class:e,allClassTypes:S}=N(r),{staffList:k}=N(y),d=n=>n?!0:"필수사항입니다.",R=[d];function g(){v.replace({path:"/class"})}async function B(n){n.preventDefault();const{valid:l}=await b.value.validate();if(l&&e.value){c.value=!0;let t;const C={className:e.value.className,cash:e.value.cash?Number(e.value.cash):null,card:e.value.card?Number(e.value.card):null,description:e.value.description,duration:Number(e.value.duration),type:e.value.type,useCount:Number(e.value.useCount),instructor:e.value.instructor};f.params.id?t=await r.updateClass(e.value.idx,C):t=await r.createClass(C),t.success&&v.replace({path:"/class"}),c.value=!1}}return(n,l)=>(U(),M(P,null,{default:o(()=>[a(X,{title:p.value},{default:o(()=>[!s(r).loading&&s(e)?(U(),A("div",z,[a(E,{ref_key:"form",ref:b,modelValue:V.value,"onUpdate:modelValue":l[8]||(l[8]=t=>V.value=t),onSubmit:l[9]||(l[9]=H(()=>{},["prevent"]))},{default:o(()=>[a(I,null,{default:o(()=>[a(x,null,{default:o(()=>[a(u,{cols:"12",md:"4"},{default:o(()=>[a(q,{modelValue:s(e).type,"onUpdate:modelValue":l[0]||(l[0]=t=>s(e).type=t),rules:[d],label:"종류",items:s(S),"item-title":"typeName","item-value":"idx",variant:"solo-filled",required:""},null,8,["modelValue","rules","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(q,{modelValue:s(e).instructor,"onUpdate:modelValue":l[1]||(l[1]=t=>s(e).instructor=t),rules:[d],label:"강사",items:s(k),"item-title":"name","item-value":"idx",variant:"solo-filled",required:""},null,8,["modelValue","rules","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(i,{modelValue:s(e).className,"onUpdate:modelValue":l[2]||(l[2]=t=>s(e).className=t),rules:R,label:"수업명",variant:"solo-filled",required:""},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(i,{type:"number",modelValue:s(e).cash,"onUpdate:modelValue":l[3]||(l[3]=t=>s(e).cash=t),rules:[d],variant:"solo-filled",label:"현금가",required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(i,{type:"number",modelValue:s(e).card,"onUpdate:modelValue":l[4]||(l[4]=t=>s(e).card=t),rules:[d],variant:"solo-filled",label:"카드가",required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(i,{type:"number",modelValue:s(e).duration,"onUpdate:modelValue":l[5]||(l[5]=t=>s(e).duration=t),rules:[d],label:"이용기간(개월)",variant:"solo-filled",required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(i,{type:"number",modelValue:s(e).useCount,"onUpdate:modelValue":l[6]||(l[6]=t=>s(e).useCount=t),label:"이용횟수",variant:"solo-filled",required:""},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"8"},{default:o(()=>[a(i,{modelValue:s(e).description,"onUpdate:modelValue":l[7]||(l[7]=t=>s(e).description=t),label:"상세설명",variant:"solo-filled"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(L),a(x,{justify:"end"},{default:o(()=>[a(u,{cols:"12",lg:"2",md:"6",sm:"12",justify:"end",class:""},{default:o(()=>[a(J),G("div",K,[a(_,{loading:c.value,color:"secondary",variant:"flat",type:"submit",onClick:B},{default:o(()=>l[10]||(l[10]=[w(" 등록 ")])),_:1},8,["loading"]),a(_,{onClick:g,color:"primary",variant:"outlined"},{default:o(()=>l[11]||(l[11]=[w(" 취소 ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):D("",!0)]),_:1},8,["title"])]),_:1}))}});export{oe as default};
