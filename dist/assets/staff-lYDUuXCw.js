import{d as f}from"./index-ChThWpwh.js";import{s}from"./staffService-B334Pa8R.js";const l=f("Staff",{state:()=>({staffList:[],staff:null,loading:!1,error:null,filter:""}),getters:{filteredStaff(){if(!this.filter)return this.staffList;const t=this.filter.toLowerCase();return this.staffList.filter(r=>{var e;return r.name.toLowerCase().includes(t)||((e=r.phone)==null?void 0:e.toString().includes(t))||r.gender.toLowerCase().includes(t)})}},actions:{async fetchAll(){this.loading=!0,this.error=null;try{this.staffList=await s.getAll()}catch(t){this.error=t instanceof Error?t.message:"Failed to fetch staff",console.error("Error fetching staff:",t)}finally{this.loading=!1}},async fetchById(t){this.loading=!0,this.error=null;try{this.staff=await s.getById(t)}catch(r){this.error=r instanceof Error?r.message:"Failed to fetch staff",console.error("Error fetching staff:",r)}finally{this.loading=!1}},async createStaff(t){this.loading=!0,this.error=null;try{const r=await s.create(t);return this.staffList.push(r),{success:!0,data:r}}catch(r){return this.error=r instanceof Error?r.message:"Failed to create staff",console.error("Error creating staff:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async updateStaff(t,r){this.loading=!0,this.error=null;try{const e=await s.update(t,r),a=this.staffList.findIndex(i=>i.idx===t);return a!==-1&&(this.staffList[a]=e),{success:!0,data:e}}catch(e){return this.error=e instanceof Error?e.message:"Failed to update staff",console.error("Error updating staff:",e),{success:!1,error:this.error}}finally{this.loading=!1}},async deleteStaff(t){this.loading=!0,this.error=null;try{return await s.delete(t),this.staffList=this.staffList.filter(r=>r.idx!==t),{success:!0}}catch(r){return this.error=r instanceof Error?r.message:"Failed to delete staff",console.error("Error deleting staff:",r),{success:!1,error:this.error}}finally{this.loading=!1}},async searchStaff(t){this.loading=!0,this.error=null;try{this.staffList=await s.search(t)}catch(r){this.error=r instanceof Error?r.message:"Failed to search staff",console.error("Error searching staff:",r)}finally{this.loading=!1}},initNewStaff(){this.staff={idx:0,name:"",grade:null,phone:null,gender:"",gradeName:""}}}});export{l as u};
